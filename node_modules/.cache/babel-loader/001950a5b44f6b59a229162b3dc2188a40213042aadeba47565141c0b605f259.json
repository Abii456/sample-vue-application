{"ast":null,"code":"import NavigationBar from '@/components/NavigationBar.vue';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { USER_BASE_URL } from '@/apiConfig';\nexport default {\n  components: {\n    NavigationBar\n  },\n  data() {\n    return {\n      user: {\n        first_name: '',\n        last_name: '',\n        email: '',\n        address: '',\n        password: ''\n      },\n      activeTab: 'profile',\n      isPasswordVisible: false,\n      isEditing: false,\n      isSavingProfile: false\n    };\n  },\n  mounted() {\n    const userData = JSON.parse(localStorage.getItem('userData'));\n    if (userData) {\n      this.user.first_name = userData.first_name;\n      this.user.last_name = userData.last_name;\n      this.user.email = userData.email;\n      this.user.address = userData.address;\n      //this.initialUserData = { ...this.user };\n    }\n  },\n\n  methods: {\n    editProfile() {\n      this.isEditing = true;\n      this.user.password = '';\n    },\n    saveProfile() {\n      if (this.isSavingProfile) {\n        return;\n      }\n      if (!this.isEditing) {\n        return;\n      }\n      const isValidForm = document.getElementById('profileForm').checkValidity();\n      if (!isValidForm) {\n        return;\n      }\n      const payload = {\n        id: JSON.parse(localStorage.getItem('userData')).id,\n        first_name: this.user.first_name,\n        last_name: this.user.last_name,\n        email: this.user.email,\n        address: this.user.address\n      };\n      // axios.put('http://127.0.0.1:8000/api/user/update-user-details', payload)\n      axios.put(`${USER_BASE_URL}update-user-details`, payload).then(response => {\n        const userData = JSON.parse(localStorage.getItem('userData'));\n        userData.first_name = response.data.data.first_name;\n        userData.last_name = response.data.data.last_name;\n        userData.email = response.data.data.email;\n        userData.address = response.data.data.address;\n        // Update the local storage with the modified user data\n        localStorage.setItem('userData', JSON.stringify(userData));\n        localStorage.setItem('authToken', response.data.data.token);\n        Swal.fire({\n          title: 'Success',\n          text: 'User details updated successfully.',\n          icon: 'success'\n        });\n        this.isEditing = false;\n      }).catch(error => {\n        console.log(error.response);\n        if (error.response && error.response.data && error.response.data.error) {\n          Swal.fire({\n            title: 'Error',\n            text: error.response.data.error,\n            icon: 'error'\n          });\n        } else {\n          Swal.fire({\n            title: 'Error',\n            text: 'An error occurred. Please try again later.',\n            icon: 'error'\n          });\n        }\n      }).finally(() => {\n        initialUserData;\n        this.isSavingProfile = false;\n      });\n    },\n    onFirstNameChange(event) {\n      this.user.first_name = event.target.value;\n    },\n    onLastNameChange(event) {\n      this.user.last_name = event.target.value;\n    },\n    onPasswordChange(event) {\n      this.user.password = event.target.value;\n    },\n    onAddressChange(event) {\n      this.user.address = event.target.value;\n    },\n    onEmailChange(event) {\n      this.user.email = event.target.value;\n    },\n    cancelEdit() {\n      this.isEditing = false;\n      this.user = {\n        ...this.initialUserData\n      };\n    }\n  }\n};","map":{"version":3,"names":["NavigationBar","axios","Swal","USER_BASE_URL","components","data","user","first_name","last_name","email","address","password","activeTab","isPasswordVisible","isEditing","isSavingProfile","mounted","userData","JSON","parse","localStorage","getItem","methods","editProfile","saveProfile","isValidForm","document","getElementById","checkValidity","payload","id","put","then","response","setItem","stringify","token","fire","title","text","icon","catch","error","console","log","finally","initialUserData","onFirstNameChange","event","target","value","onLastNameChange","onPasswordChange","onAddressChange","onEmailChange","cancelEdit"],"sources":["src/components/UserDetailsPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"container p-5\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-3\">\r\n                <NavigationBar :activeTab=\"activeTab\" />\r\n            </div>\r\n\r\n            <div class=\"col-md-8\">\r\n                <h3 class=\"mb-4\">My Profile</h3>\r\n                <form @submit.prevent=\"saveProfile\" id=\"profileForm\"> \r\n                    <div class=\"mb-3 d-flex\">\r\n                        <div class=\"me-3\">\r\n                            <label for=\"firstName\" class=\"form-label\">First Name</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"firstName\" :value=\"user.first_name\"\r\n                                :disabled=\"!isEditing\" @input=\"onFirstNameChange\" required />\r\n                        </div>\r\n                        <div>\r\n                            <label for=\"lastName\" class=\"form-label\">Last Name</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"lastName\" :value=\"user.last_name\"\r\n                                :disabled=\"!isEditing\" @input=\"onLastNameChange\" required />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"email\" class=\"form-label\">Email</label>\r\n                        <input type=\"email\" class=\"form-control\" id=\"email\" @input=\"onEmailChange\" :value=\"user.email\" :disabled=\"!isEditing\"\r\n                            required />\r\n                    </div>\r\n                    <hr>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"password\" class=\"form-label\">Password</label>\r\n                        <input :type=\"isEditing ? 'text' : 'password'\" class=\"form-control\" id=\"password\"\r\n                            :value=\"isEditing ? user.password : '********'\" :disabled=\"!isEditing\" @input=\"onPasswordChange\"\r\n                            required />\r\n                    </div>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"address\" class=\"form-label\">Address</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"address\" :value=\"user.address\" :disabled=\"!isEditing\"\r\n                            @input=\"onAddressChange\" required />\r\n                    </div>\r\n                    <div class=\"mb-3\" v-if=\"isEditing\">\r\n                        <button class=\"btn btn-success me-2\">Save Profile</button>\r\n                        <button class=\"btn btn-danger\" @click=\"cancelEdit\">Cancel</button>\r\n                    </div>\r\n                    <div class=\"mb-3\" v-else>\r\n                        <button class=\"btn btn-primary\" @click=\"editProfile\">Update My Profile</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport NavigationBar from '@/components/NavigationBar.vue';\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2';\r\nimport { USER_BASE_URL } from '@/apiConfig';\r\n\r\nexport default {\r\n    components: {\r\n        NavigationBar,\r\n    },\r\n    data() {\r\n        return {\r\n            user: {\r\n                first_name: '',\r\n                last_name: '',\r\n                email: '',\r\n                address: '',\r\n                password: '',\r\n            },\r\n            activeTab: 'profile',\r\n            isPasswordVisible: false,\r\n            isEditing: false,\r\n            isSavingProfile: false,\r\n        };\r\n    },\r\n    mounted() {\r\n        const userData = JSON.parse(localStorage.getItem('userData'));\r\n        if (userData) {\r\n            this.user.first_name = userData.first_name;\r\n            this.user.last_name = userData.last_name;\r\n            this.user.email = userData.email;\r\n            this.user.address = userData.address;\r\n            //this.initialUserData = { ...this.user };\r\n        }\r\n    },\r\n    methods: {\r\n        editProfile() {\r\n            this.isEditing = true;\r\n            this.user.password = '';\r\n        },\r\n        saveProfile() {\r\n            if (this.isSavingProfile) {\r\n                return;\r\n            }\r\n\r\n            if (!this.isEditing) {\r\n                return;\r\n            }\r\n            const isValidForm = document.getElementById('profileForm').checkValidity();\r\n            if (!isValidForm) {\r\n                return;\r\n            }\r\n            const payload = {\r\n                id: JSON.parse(localStorage.getItem('userData')).id,\r\n                first_name: this.user.first_name,\r\n                last_name: this.user.last_name,\r\n                email: this.user.email,\r\n                address: this.user.address,\r\n            };\r\n            // axios.put('http://127.0.0.1:8000/api/user/update-user-details', payload)\r\n            axios.put(`${USER_BASE_URL}update-user-details`, payload)\r\n                .then((response) => {\r\n                    const userData = JSON.parse(localStorage.getItem('userData'));\r\n                    userData.first_name = response.data.data.first_name;\r\n                    userData.last_name = response.data.data.last_name;\r\n                    userData.email = response.data.data.email;\r\n                    userData.address = response.data.data.address;\r\n                    // Update the local storage with the modified user data\r\n                    localStorage.setItem('userData', JSON.stringify(userData));\r\n                    localStorage.setItem('authToken', response.data.data.token);\r\n                    Swal.fire({\r\n                        title: 'Success',\r\n                        text: 'User details updated successfully.',\r\n                        icon: 'success',\r\n                    });\r\n                    this.isEditing = false;\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error.response);\r\n                    if (error.response && error.response.data && error.response.data.error) {\r\n                        Swal.fire({\r\n                            title: 'Error',\r\n                            text: error.response.data.error,\r\n                            icon: 'error',\r\n                        });\r\n                    } else {\r\n                        Swal.fire({\r\n                            title: 'Error',\r\n                            text: 'An error occurred. Please try again later.',\r\n                            icon: 'error',\r\n                        });\r\n                    }\r\n                })\r\n                .finally(() => {initialUserData\r\n                    this.isSavingProfile = false; \r\n                });\r\n        },\r\n        onFirstNameChange(event) {\r\n            this.user.first_name = event.target.value;\r\n        },\r\n        onLastNameChange(event) {\r\n            this.user.last_name = event.target.value;\r\n        },\r\n        onPasswordChange(event) {\r\n            this.user.password = event.target.value;\r\n        },\r\n        onAddressChange(event) {\r\n            this.user.address = event.target.value;\r\n        },\r\n        onEmailChange(event) {\r\n            this.user.email = event.target.value;\r\n        },\r\n        cancelEdit() {\r\n            this.isEditing = false;\r\n            this.user = { ...this.initialUserData };\r\n        },\r\n    },\r\n};\r\n</script>\r\n  \r\n<style>\r\n/* Add custom styles if needed */\r\n</style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}