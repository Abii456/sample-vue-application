{"ast":null,"code":"import Vue from 'vue';\nimport Router from 'vue-router';\nimport LoginForm from '@/components/LoginForm.vue';\nimport RegistrationForm from '@/components/RegistrationForm.vue';\nimport WelcomePage from '@/components/WelcomePage.vue';\nimport ResetPasswordForm from '@/components/ResetPasswordForm.vue';\nVue.use(Router);\nconst router = new Router({\n  routes: [{\n    path: '/login',\n    component: LoginForm\n  }, {\n    path: '/register',\n    component: RegistrationForm\n  }, {\n    path: '/welcome',\n    component: WelcomePage\n  }, {\n    path: '/reset-password',\n    component: ResetPasswordForm\n  }, {\n    path: '/user-details',\n    component: UserDetails,\n    meta: {\n      requiresAuth: true\n    }\n  },\n  // Add route meta for authentication\n  {\n    path: '*',\n    redirect: 'login'\n  }]\n});\n\n// router.beforeEach((to, from, next) => {\n//   if (to.path === '/welcome') {\n//     if (!isLoggedIn()) {\n//       next('/login');\n//     } else {\n//       next();\n//     }\n//   } else if (from.path === '/welcome' && to.path !== '/login') {\n//     next('/login');\n//   } else {\n//     next();\n//   }\n// });\n\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // Check if the route requires authentication (has the meta field requiresAuth)\n    const authToken = localStorage.getItem('authToken');\n    if (!authToken) {\n      // User is not authenticated, redirect to login\n      next('/login');\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\nfunction isLoggedIn() {\n  const authToken = localStorage.getItem('authToken');\n  return !!authToken;\n}\nexport default router;","map":{"version":3,"names":["Vue","Router","LoginForm","RegistrationForm","WelcomePage","ResetPasswordForm","use","router","routes","path","component","UserDetails","meta","requiresAuth","redirect","beforeEach","to","from","next","matched","some","record","authToken","localStorage","getItem","isLoggedIn"],"sources":["C:/Users/cmaca/OneDrive/Documents/Passafund/sample-application/src/router/index.js"],"sourcesContent":["import Vue from 'vue';\r\nimport Router from 'vue-router';\r\nimport LoginForm from '@/components/LoginForm.vue';\r\nimport RegistrationForm from '@/components/RegistrationForm.vue';\r\nimport WelcomePage from '@/components/WelcomePage.vue';\r\nimport ResetPasswordForm from '@/components/ResetPasswordForm.vue';\r\n\r\nVue.use(Router);\r\n\r\nconst router = new Router({\r\n  routes: [\r\n    { path: '/login', component: LoginForm },\r\n    { path: '/register', component: RegistrationForm },\r\n    { path: '/welcome', component: WelcomePage },\r\n    { path: '/reset-password', component: ResetPasswordForm },\r\n    { path: '/user-details', component: UserDetails, meta: { requiresAuth: true } }, // Add route meta for authentication\r\n    { path: '*', redirect: 'login' }, \r\n  ]\r\n});\r\n\r\n// router.beforeEach((to, from, next) => {\r\n//   if (to.path === '/welcome') {\r\n//     if (!isLoggedIn()) {\r\n//       next('/login');\r\n//     } else {\r\n//       next();\r\n//     }\r\n//   } else if (from.path === '/welcome' && to.path !== '/login') {\r\n//     next('/login');\r\n//   } else {\r\n//     next();\r\n//   }\r\n// });\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.matched.some((record) => record.meta.requiresAuth)) {\r\n    // Check if the route requires authentication (has the meta field requiresAuth)\r\n    const authToken = localStorage.getItem('authToken');\r\n    if (!authToken) {\r\n      // User is not authenticated, redirect to login\r\n      next('/login');\r\n    } else {\r\n      next();\r\n    }\r\n  } else {\r\n    next();\r\n  }\r\n});\r\n\r\nfunction isLoggedIn() {\r\n  const authToken = localStorage.getItem('authToken');\r\n  return !!authToken; \r\n}\r\n\r\nexport default router;\r\n\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,YAAY;AAC/B,OAAOC,SAAS,MAAM,4BAA4B;AAClD,OAAOC,gBAAgB,MAAM,mCAAmC;AAChE,OAAOC,WAAW,MAAM,8BAA8B;AACtD,OAAOC,iBAAiB,MAAM,oCAAoC;AAElEL,GAAG,CAACM,GAAG,CAACL,MAAM,CAAC;AAEf,MAAMM,MAAM,GAAG,IAAIN,MAAM,CAAC;EACxBO,MAAM,EAAE,CACN;IAAEC,IAAI,EAAE,QAAQ;IAAEC,SAAS,EAAER;EAAU,CAAC,EACxC;IAAEO,IAAI,EAAE,WAAW;IAAEC,SAAS,EAAEP;EAAiB,CAAC,EAClD;IAAEM,IAAI,EAAE,UAAU;IAAEC,SAAS,EAAEN;EAAY,CAAC,EAC5C;IAAEK,IAAI,EAAE,iBAAiB;IAAEC,SAAS,EAAEL;EAAkB,CAAC,EACzD;IAAEI,IAAI,EAAE,eAAe;IAAEC,SAAS,EAAEC,WAAW;IAAEC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAAE,CAAC;EAAE;EACjF;IAAEJ,IAAI,EAAE,GAAG;IAAEK,QAAQ,EAAE;EAAQ,CAAC;AAEpC,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAP,MAAM,CAACQ,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,IAAIF,EAAE,CAACG,OAAO,CAACC,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACT,IAAI,CAACC,YAAY,CAAC,EAAE;IACzD;IACA,MAAMS,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IACnD,IAAI,CAACF,SAAS,EAAE;MACd;MACAJ,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC,MAAM;MACLA,IAAI,CAAC,CAAC;IACR;EACF,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,SAASO,UAAUA,CAAA,EAAG;EACpB,MAAMH,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACnD,OAAO,CAAC,CAACF,SAAS;AACpB;AAEA,eAAef,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}